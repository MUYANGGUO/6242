<html>
  <head>



    <!-- MDL Style dependencies --> 
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

    <!-- d3 dependencies --> 
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <!-- deck.gl standalone bundle -->
    <script src="https://unpkg.com/deck.gl@^7.0.0/dist.min.js"></script>

    <!-- Mapbox dependencies -->
    <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js"></script>
    <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css" rel="stylesheet" />

    <style type="text/css">
      body {margin: 0; padding: 0;background-color:grey;}
      #container {width: 100vw; height: 100vh;}
     
    </style>
    <!-- Flat button -->
    <div id = "nav" class="mdl-layout__header-row">


    <!-- legft top corner menu bar -->
                          <button id="demo-menu-lower-left"
                          class="mdl-button mdl-js-button mdl-button--icon">
                          <i class="material-icons">more_vert</i>
                          </button>

                          <ul class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect"
                          for="demo-menu-lower-left">
                          <li class="mdl-menu__item">Some Action</li>
                          <li class="mdl-menu__item mdl-menu__item--full-bleed-divider">Another Action</li>
                          <li disabled class="mdl-menu__item">Disabled Action</li>
                          <li class="mdl-menu__item">Yet Another Action</li>
                          </ul>



        <!-- Title -->
        <span class="mdl-layout-title">Title</span>
        <!-- Add spacer, to align navigation to the right -->
        <div class="mdl-layout-spacer"></div>
        <!-- Navigation -->
        <nav class="mdl-navigation">
          <a class="mdl-navigation__link" href="">Link</a>
          <a class="mdl-navigation__link" href="">Link</a>
          <a class="mdl-navigation__link" href="">Link</a>
          <a class="mdl-navigation__link" href="">Link</a>
        </nav>
      </div>
      <!-- Left aligned menu below button -->




  </head>

  <body>
  

    <div id="container"></div>



  </body>

<script type="text/javascript">

// var datacheck = d3.json(" https://data.sfgov.org/resource/wg3w-h783.json?$where=within_circle(point, 37.79, -122.45, 1000)").then(function(datacheck) {
//     console.log(datacheck);
//   });
// const SFPD_json = fetch('https://data.sfgov.org/resource/wg3w-h783.json?$where=within_circle(point, 37.79, -122.45, 1000)')
//       .then(response => response.json())
//       .then(SFPD_json => alert(SFPD_json[10].point['coordinates']));

// source: github user content raw link

const Neighborhoods =
  'https://raw.githubusercontent.com/muyangguo/6242/master/Zillow-DataClean/zillow-neighborhoods.geojson';

const deckgl = new deck.DeckGL({
  container: 'container',
  // Set your Mapbox access token here
  //Extremely Important, Create your Mapbox account, and use the API KEY generated. Fees will occur if exceeding the free tier limits
  //////////////////////////////////////////
  mapboxApiAccessToken: '',
  //////////////////////////////////////////

  //I have set the layer correctly with the geo info for SF, so in testing, no need to use MAPBOX to show the underlying map
  latitude: 37.7749,
  longitude: -122.4194,
  zoom: 11,
  bearing: 0,
  pitch: 30,
  layers: [
    new deck.GeoJsonLayer({
      id: 'Neighborhoods',
      data: Neighborhoods,
      // Styles
      filled: true,
      pointRadiusMinPixels: 2,
      opacity: 1,
      pointRadiusScale: 200,
      getLineWidth: 20,
      getLineColor: [128,128,128,200],
      getElevation: 30,
      getRadius: f => (11 - f.properties.scalerank),
      getFillColor: [169, 169, 169, 180],
      // Interactive props

      //This is the props when you click on a region
      pickable: true,
      autoHighlight: true,
      onClick: info => info.object && alert(`${info.object.properties.name} (${info.object.properties.city})`)
    }),



    //create scatter plot layer for proping the SFPD fetched data
    new deck.ScatterplotLayer({
      data: [
        {position: [-122.402, 37.79], color: [250, 0, 0], radius: 1000}
      ],
      getPosition: d => d.position,
      getRadius: d => d.radius,
      getFillColor: d => d.color,
      opacity: 0.3
    }),
    new deck.TextLayer({
      data: [
        {position: [-122.402, 37.79], text: 'testing'}
      ],
      getPosition: d => d.position,
      getText: d => d.text,
      getSize: 28,
      getAngle: 0,
      getTextAnchor: 'middle',
      getAlignmentBaseline: 'bottom'
    })

  ]
});
</script>



<!-- <script>
fetch('https://data.sfgov.org/resource/wg3w-h783.json?$where=within_circle(point, 37.79, -122.45, 1000)')
      .then(response => response.json())
      .then(SFPD_json => alert(SFPD_json[10].point['coordinates']));
</script> -->
</html>
